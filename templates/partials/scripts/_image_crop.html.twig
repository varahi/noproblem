<script>
    $(document).ready(function(){
        $image_crop = $('#image_avatar').croppie({
            url: '{{ asset('uploads/files/' ~ user.avatar) }}',
            enableExif: true,
            viewport: {
                width:200,
                height:200,
                type:'circle'
            },
            boundary:{
                width:300,
                height:300
            },
        });

        $('.crop_image').click(function(event){
            $image_crop.croppie('result', {
                type: 'canvas',
                size: 'viewport'
            }).then(function(response){
                $.ajax({
                    url:"{{ path('app_upload_cropped_image') }}",
                    type: "POST",
                    data:{"image": response},
                    success:function(data)
                    {
                        $("#imageModal").css("visibility", "hidden")
                    }
                });
            })
        });


        $(".open-modal").click(function(){
            //$("#imageModal").show();
            $("#imageModal").css("visibility", "visible")
        });
        $(".close").click(function(){
            //$("#imageModal").hide();
            $("#imageModal").css("visibility", "hidden")
        });
    });
</script>